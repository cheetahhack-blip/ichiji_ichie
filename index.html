<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>一字一会（Ichiji Ichie）</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#4fb3bd">
</head>
<body>

  <!-- タイトル画面 -->
  <div id="screenTitle" class="screen">
    <div class="titleCard">
      <div class="titleLogo">一字一会</div>
      <div class="titleSub muted">各行で文字を重複なく使って単語を完成させる</div>

      <div class="titleControls">
        <label class="field">
          <span>難易度</span>
          <select id="modeSelect">
            <option value="Easy">Easy（1〜6行）</option>
            <option value="Normal">Normal（1〜7行）</option>
            <option value="Hard">Hard（1〜8行）</option>
            <option value="Expert">Expert（1〜9行）</option>
            <option value="Hell">Hell（1〜10行）</option>
          </select>
        </label>

        <div class="titleStats">
          <div>ベスト：<span id="bestTime">--</span></div>
          <div id="dictStatus" class="muted">辞書：読込中…</div>
        </div>

        <button id="goPlayBtn" class="btnPrimary">プレイ開始</button>
      </div>

        <button id="myDictBtn" class="ghost">マイ辞書</button>

        <button id="licensesBtn" class="ghost">Licenses</button>

      <div id="titleWarn" class="warn"></div>
    </div>
  </div>

  <!-- プレイ画面 -->
  <div id="screenGame" class="screen hidden">
    <header class="top">
      <div class="topRow">
        <div class="topLeft">
          <div class="h1">一字一会</div>
          <div class="muted">難易度：<span id="modeLabel"></span></div>
        </div>

        <div class="topRight">
          <button id="toTitleBtn">タイトルへ</button>
          <button id="restartBtn">リセット</button>
        </div>
      </div>

      <div class="statusRow">
        <div>タイマー：<span id="timer">00:00.0</span></div>
        <div>ベスト：<span id="bestTime2">--</span></div>
        <div id="dictStatus2" class="muted">辞書：読込中…</div>
      </div>
    </header>

    <main class="main">
      <section class="board">
        <div class="boardHead">
          <div class="muted">行をクリックして選択 → ひらがなで入力 → 行ごとに判定</div>

          <div class="directBar">
              <select id="directRowSelect"></select>
              <input id="directInput" type="text" placeholder="選択行を直接入力（例：ばすてぃーゆ）" />
              <button id="directBackspace" class="smallBtn">⌫</button>
              <button id="directClear" class="smallBtn">✖</button>
              <button id="directJudge" class="btnPrimary">判定</button>
          </div>

          <div id="globalWarn" class="muted"></div>
        </div>

        <div id="rows" class="rows"></div>
      </section>

      <section class="keyboard">
        <div class="kbdHead">
          <div>五十音表</div>
          <div class="muted">使用済みは薄く表示（入力は可能）</div>
        </div>

        <div class="kbdBlock">
          <div id="kbdSeion" class="kbd"></div>
        </div>

        <div class="kbdBlock">
          <div id="kbdOther" class="kbd"></div>
        </div>
      </section>
    </main>
  </div>

  <!-- マイ辞書モーダル（プレイ画面から開く） -->
  <div id="modalBackdrop" class="backdrop hidden"></div>
  <div id="myDictModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalHead">
      <div class="modalTitle">マイ辞書</div>
      <button id="closeModalBtn" class="ghost">閉じる</button>
    </div>

    <div class="modalBody">
      <div class="muted">1〜10文字。語内で同じ文字の重複は不可。既存辞書にある語は登録不可（最大200語）。</div>

      <div class="myDictAdd">
        <input id="myWordInput" type="text" placeholder="ひらがな（例：ばすてぃーゆ）" />
        <button id="addMyWordBtn" class="btnPrimary">追加</button>
      </div>

      <div id="myDictMsg" class="warn"></div>

      <div class="myDictListWrap">
        <div class="muted">登録一覧</div>
        <ul id="myDictList" class="myDictList"></ul>
      </div>
    </div>
  </div>

  <!-- クリア演出モーダル -->
  <div id="clearBackdrop" class="backdrop hidden"></div>
  <div id="clearModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalHead">
      <div class="modalTitle">✨ クリア ✨</div>
      <button id="closeClearBtn" class="ghost">閉じる</button>
    </div>

    <div class="modalBody">
      <div class="clearBig" id="clearTimeText">00:00.0</div>
      <div class="muted" id="clearBestText">ベスト：--</div>

      <div class="clearButtons">
        <button id="clearRestartBtn" class="btnPrimary">もう一度</button>
        <button id="clearToTitleBtn">タイトルへ</button>
      </div>
    </div>
  </div>

  <!-- Licenses モーダル -->
  <div id="licBackdrop" class="backdrop hidden"></div>
  <div id="licModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalHead">
      <div class="modalTitle">Licenses</div>
      <button id="closeLicBtn" class="ghost">閉じる</button>
    </div>

    <div class="modalBody">
      <pre id="licText" class="licText">Loading...</pre>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
